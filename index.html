<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://rawcdn.githack.com/jeromeetienne/ar.js/2.0.1/aframe/build/aframe-ar.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <a-scene embedded arjs>
      <a-assets>
        <img id="gift" src="gift.png">
      </a-assets>

      <a-marker preset="hiro" id="marker">
        <!-- プレゼントボックス -->
        <a-image id="giftbox"
                 src="#gift"
                 rotation="0 270 0"
                 position="0 0 0"
                 scale="5 5 5">
        </a-image>

        <!-- 成功テキスト -->
        <a-entity id="successText"
                  position="0 1.5 0"
                  visible="false"
                  text="value: 成功！; color: gold; align: center; width: 4"
                  material="opacity: 0"
                  animation__fadein="property: material.opacity; from: 0; to: 1; dur: 1000; startEvents: showText">
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>

      <script>
        const gift = document.getElementById('giftbox');
        const successText = document.getElementById('successText');

        gift.addEventListener('click', () => {
          let currentY = gift.getAttribute('rotation').y;
          let nextY = (currentY + 45) % 360;
          gift.setAttribute('rotation', `0 ${nextY} 0`);

          // 正解の方向が90度（右向き）
          if (nextY === 90) {
            successText.setAttribute('visible', true);
            successText.emit('showText');
          }
        });
      </script>
    </a-scene>
  </body>
</html>
