<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.3.2/aframe/build/aframe-ar.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <a-scene embedded arjs>
      <a-assets>
        <!-- プレゼント画像 -->
        <img id="gift" src="gift.png">
      </a-assets>

      <a-marker preset="hiro" id="marker">
        <!-- プレゼントボックス -->
        <a-image id="giftbox"
                 src="#gift"
                 rotation="0 270 0"
                 position="0 0 0"
                 scale="5 5 5">
        </a-image>

        <!-- 成功テキスト（最初は非表示） -->
        <a-entity id="successText"
                  position="0 1.5 0"
                  visible="false"
                  text="value: 成功！; color: gold; align: center; width: 4"
                  animation__fadein="property: opacity; from: 0; to: 1; dur: 1000; startEvents: showText">
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>

      <script>
        const gift = document.getElementById('giftbox');
        const successText = document.getElementById('successText');

        gift.addEventListener('click', () => {
          // 回転：左周りに45度ずつ（8方向対応）
          let currentY = gift.getAttribute('rotation').y;
          let nextY = (currentY + 45) % 360;
          gift.setAttribute('rotation', `0 ${nextY} 0`);

          // 正解方向が「90度（右向き）」だと仮定
          if (nextY === 90) {
            successText.setAttribute('visible', true);
            successText.emit('showText'); // フェードイン開始
          }
        });
      </script>
    </a-scene>
  </body>
</html>
